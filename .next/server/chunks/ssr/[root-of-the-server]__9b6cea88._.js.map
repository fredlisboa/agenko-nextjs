{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/user/agenko-nextjs/src/components/UtmLinkUpdater.tsx"],"sourcesContent":["// src/components/UtmLinkUpdater.tsx\n'use client';\n\nimport { useEffect } from 'react';\nimport { usePathname, useSearchParams } from 'next/navigation';\n\nconst SESSION_STORAGE_KEY = 'utm_params_session';\n\nexport function UtmLinkUpdater() {\n  const pathname = usePathname();\n  const searchParams = useSearchParams();\n\n  useEffect(() => {\n    const currentQueryString = searchParams.toString();\n    \n    // 1. If the current URL has any 'utm_' parameter, save the entire query string.\n    if (currentQueryString.includes('utm_')) {\n      sessionStorage.setItem(SESSION_STORAGE_KEY, currentQueryString);\n    }\n\n    // 2. Get the stored UTM parameters.\n    const storedUtmParams = sessionStorage.getItem(SESSION_STORAGE_KEY);\n\n    // 3. If there are no stored params, do nothing.\n    if (!storedUtmParams) {\n      return;\n    }\n\n    // 4. Update all <a> tags on the page.\n    const allLinks = document.getElementsByTagName('a');\n    for (let i = 0; i < allLinks.length; i++) {\n      const link = allLinks[i];\n      const originalHref = link.getAttribute('href');\n\n      // Ensure we have a valid link and it's not a mail/tel link.\n      if (originalHref && !originalHref.startsWith('mailto:') && !originalHref.startsWith('tel:')) {\n        // Check if the parameters are already in the link to prevent duplicates.\n        if (link.href.includes(storedUtmParams)) {\n          continue;\n        }\n\n        // Append the UTM parameters.\n        if (originalHref.includes('?')) {\n          link.href = `${originalHref}&${storedUtmParams}`;\n        } else {\n          link.href = `${originalHref}?${storedUtmParams}`;\n        }\n      }\n    }\n  }, [pathname, searchParams]); // Re-run on every navigation\n\n  return null; // This component renders nothing.\n}"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAGpC;AACA;AAHA;;;AAKA,MAAM,sBAAsB;AAErB,SAAS;IACd,MAAM,WAAW,IAAA,iJAAW;IAC5B,MAAM,eAAe,IAAA,qJAAe;IAEpC,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,aAAa,QAAQ;QAEhD,gFAAgF;QAChF,IAAI,mBAAmB,QAAQ,CAAC,SAAS;YACvC,eAAe,OAAO,CAAC,qBAAqB;QAC9C;QAEA,oCAAoC;QACpC,MAAM,kBAAkB,eAAe,OAAO,CAAC;QAE/C,gDAAgD;QAChD,IAAI,CAAC,iBAAiB;YACpB;QACF;QAEA,sCAAsC;QACtC,MAAM,WAAW,SAAS,oBAAoB,CAAC;QAC/C,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,MAAM,EAAE,IAAK;YACxC,MAAM,OAAO,QAAQ,CAAC,EAAE;YACxB,MAAM,eAAe,KAAK,YAAY,CAAC;YAEvC,4DAA4D;YAC5D,IAAI,gBAAgB,CAAC,aAAa,UAAU,CAAC,cAAc,CAAC,aAAa,UAAU,CAAC,SAAS;gBAC3F,yEAAyE;gBACzE,IAAI,KAAK,IAAI,CAAC,QAAQ,CAAC,kBAAkB;oBACvC;gBACF;gBAEA,6BAA6B;gBAC7B,IAAI,aAAa,QAAQ,CAAC,MAAM;oBAC9B,KAAK,IAAI,GAAG,GAAG,aAAa,CAAC,EAAE,iBAAiB;gBAClD,OAAO;oBACL,KAAK,IAAI,GAAG,GAAG,aAAa,CAAC,EAAE,iBAAiB;gBAClD;YACF;QACF;IACF,GAAG;QAAC;QAAU;KAAa,GAAG,6BAA6B;IAE3D,OAAO,MAAM,kCAAkC;AACjD","debugId":null}}]
}