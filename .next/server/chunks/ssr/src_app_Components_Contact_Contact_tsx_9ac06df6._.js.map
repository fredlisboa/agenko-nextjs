{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/user/agenko-nextjs/src/app/Components/Contact/Contact.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from 'next/image';\nimport React, { useEffect, useRef, useState } from 'react';\n\n// --- FIX for TypeScript Error ---\n// Extend the global Window interface to include properties added by external scripts like GTM.\ndeclare global {\n  interface Window {\n    dataLayer: any[];\n    KTracking?: { // Make KTracking optional as it might not always be present\n      reportConversion: () => void;\n    };\n  }\n}\n\n// Define the type for our form data\ninterface FormData {\n    nome: string;\n    whatsapp: string;\n    email: string;\n}\n\n// Define the type for our component's state\ntype FormStatus = 'idle' | 'loading' | 'success' | 'error' | 'client-error';\ninterface FormMessage {\n    type: FormStatus;\n    text: string;\n}\n\nconst Contact = () => {\n    const mapContainerRef = useRef<HTMLDivElement>(null);\n    const overlayRef = useRef<HTMLDivElement>(null);\n    const [formData, setFormData] = useState<FormData>({\n        nome: '',\n        whatsapp: '',\n        email: '',\n    });\n    const [formStatus, setFormStatus] = useState<FormStatus>('idle');\n    const [formMessage, setFormMessage] = useState<FormMessage | null>(null);\n\n    const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const { name, value } = e.target;\n        \n        if (name === 'whatsapp') {\n            const numericValue = value.replace(/\\D/g, '').slice(0, 11);\n            setFormData((prevData) => ({ ...prevData, [name]: numericValue }));\n        } else {\n            setFormData((prevData) => ({ ...prevData, [name]: value }));\n        }\n    };\n\n    const validateForm = (): boolean => {\n        const { nome, whatsapp, email } = formData;\n\n        if (!nome || nome.trim().length < 2) {\n            setFormMessage({ type: 'client-error', text: '‚ùå Por favor, digite seu nome completo.' });\n            return false;\n        }\n\n        if (!email || !email.includes('@') || !email.includes('.')) {\n            setFormMessage({ type: 'client-error', text: '‚ùå Por favor, digite um email v√°lido.' });\n            return false;\n        }\n\n        if (!whatsapp || whatsapp.trim().length < 10) {\n            setFormMessage({ type: 'client-error', text: '‚ùå Por favor, digite um WhatsApp v√°lido (m√≠n. 10 d√≠gitos).' });\n            return false;\n        }\n\n        return true;\n    };\n\n    const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n        e.preventDefault();\n        setFormMessage(null);\n\n        if (!validateForm()) {\n            return;\n        }\n\n        setFormStatus('loading');\n\n        try {\n            const response = await fetch('/api/contact', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(formData),\n            });\n\n            const result = await response.json();\n\n            if (response.ok) {\n                setFormStatus('success');\n                setFormMessage({ type: 'success', text: result.message });\n                \n                try {\n                    window.dataLayer = window.dataLayer || [];\n                    window.dataLayer.push({\n                        event: 'sd_landing_page_nextjs',\n                        lead_name: formData.nome,\n                        lead_email: formData.email,\n                        lead_whatsapp: formData.whatsapp,\n                        form_source: 'nextjs_contact_form_v1',\n                        page_url: window.location.href\n                    });\n                    console.log('üìä DataLayer push successful.');\n\n                    if (window.KTracking && typeof window.KTracking.reportConversion === 'function') {\n                        window.KTracking.reportConversion();\n                        console.log('‚úÖ Keitaro conversion reported.');\n                    }\n                } catch (trackingError) {\n                    console.warn('‚ö†Ô∏è Error during tracking:', trackingError);\n                }\n\n                setTimeout(() => {\n                     setFormData({\n                        nome: '',\n                        whatsapp: '',\n                        email: '',\n                    });\n                }, 500);\n\n            } else {\n                setFormStatus('error');\n                setFormMessage({ type: 'error', text: result.message || '‚ö†Ô∏è Houve um problema tempor√°rio. Tente novamente.' });\n            }\n        } catch (error) {\n            setFormStatus('error');\n            setFormMessage({ type: 'error', text: '‚ö†Ô∏è Houve um problema tempor√°rio. Tente novamente em alguns segundos.' });\n        }\n    };\n\n    useEffect(() => {\n        // ... (map interaction logic remains the same)\n    }, []);\n\n    const renderFormMessage = () => {\n        if (!formMessage) return null;\n\n        if (formStatus === 'success') {\n            return (\n                <div className=\"message success\" style={{ textAlign: 'center', lineHeight: 1.6 }}>\n                    <p style={{ fontSize: '1.2em', marginBottom: '15px' }}>\n                        <strong>‚úÖ Tudo certo! Recebemos seu contato.</strong>\n                    </p>\n                    <p style={{ marginBottom: '15px' }}>\n                        Nossa equipe entrar√° em contato com voc√™ em breve.\n                    </p>\n                    <p style={{ marginBottom: '15px' }}>\n                        <strong>Continue sua jornada:</strong> Clique abaixo para falar diretamente conosco!\n                    </p>\n                    <a \n                        href=\"https://wa.me/5562982433773?text=Ol%C3%A1!%20Vim%20pelo%20site%20e%20acabei%20de%20preencher%20o%20formul%C3%A1rio.%20Gostaria%20de%20continuar%20meu%20atendimento.\" \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\" \n                        className=\"whatsapp-button\"\n                    >\n                        <span>üì±</span> Abrir WhatsApp Agora\n                    </a>\n                </div>\n            );\n        }\n\n        return (\n            <div className={`message ${formMessage.type === 'client-error' ? 'error' : 'server-error'}`}>\n                {formMessage.text}\n            </div>\n        );\n    };\n    \n    // Helper for the red asterisk\n    const requiredMark = <span style={{ color: 'red', fontWeight: 'bold' }}>*</span>;\n\n    return (\n        <div>\n            <section className=\"agenko-contact pt-80 pb-30\">\n                 <div className=\"container\">\n                     <div className=\"row\">\n                         <div className=\"col-lg-5\">\n                            {/* ... Your existing contact info wrapper ... */}\n                         </div>\n                         <div className=\"col-lg-7\">\n                             <div className=\"agenko-content-box mb-50 pf_fadeup\">\n                                 <div className=\"section-title mb-20\">\n                                     <span className=\"sub-title\">Agende Sua Avalia√ß√£o</span>\n                                     <h2>Seu sorriso ideal come√ßa com um plano.</h2>\n                                 </div>\n                                 <p className=\"mb-20\" style={{textAlign: 'justify', hyphens: 'auto'}}>Preencha o formul√°rio para agendar sua avalia√ß√£o gratuita. Nossa equipe de gest√£o de pacientes entrar√° em contato em breve para confirmar o <b>melhor hor√°rio</b> para voc√™.</p>\n                                 \n                                {formStatus !== 'success' ? (\n                                    <form className=\"agenko-contact-form style-one\" id=\"contact-form\" onSubmit={handleSubmit} noValidate>\n                                        <div className=\"row\">\n                                            <div className=\"col-md-6\">\n                                                <div className=\"form-group\">\n                                                    <label htmlFor=\"nome\" className=\"form-label\">Nome Completo {requiredMark}</label>\n                                                    <input id=\"nome\" type=\"text\" className=\"form_control\" placeholder=\"Digite seu nome\" name=\"nome\" required value={formData.nome} onChange={handleInputChange} />\n                                                </div>\n                                            </div>\n                                            <div className=\"col-md-6\">\n                                                <div className=\"form-group\">\n                                                    <label htmlFor=\"whatsapp\" className=\"form-label\">WhatsApp {requiredMark}</label>\n                                                    <input id=\"whatsapp\" type=\"tel\" className=\"form_control\" placeholder=\"Apenas n√∫meros com DDD\" name=\"whatsapp\" required value={formData.whatsapp} onChange={handleInputChange} inputMode=\"numeric\" />\n                                                </div>\n                                            </div>\n                                            <div className=\"col-md-12\">\n                                                <div className=\"form-group\">\n                                                    <label htmlFor=\"email\" className=\"form-label\">Email {requiredMark}</label>\n                                                    <input id=\"email\" type=\"email\" className=\"form_control\" placeholder=\"seumelhor@email.com\" name=\"email\" required value={formData.email} onChange={handleInputChange} />\n                                                </div>\n                                            </div>\n                                            <div className=\"col-lg-12\">\n                                                <div className=\"form-group\">\n                                                    <button type=\"submit\" className=\"theme-btn\" disabled={formStatus === 'loading'}>\n                                                        {formStatus === 'loading' ? 'ENVIANDO...' : 'Agendar Avalia√ß√£o Gratuita'}\n                                                    </button>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </form>\n                                 ) : null}\n\n                                <div className=\"col-lg-12\">\n                                    {renderFormMessage()}\n                                </div>\n                             </div>\n                         </div>\n                     </div>\n                 </div>\n            </section>\n            \n            <section className=\"agenko-map\">\n                 {/* ... (map section remains the same) ... */}\n            </section>        \n        </div>\n    );\n};\n\nexport default Contact;"],"names":[],"mappings":"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","debugId":null}}]
}